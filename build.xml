<?xml version="1.0" encoding="UTF-8"?>

<project name="kunstmaanbundles" default="linter">

    <target name="beforescripts">
        <echo msg="Running the before scripts..." />
        <echo msg="  -- Installing composer..." />
        <exec command="curl -s http://getcomposer.org/installer | php" dir="." />
        <echo msg="  -- Installing dependencies..." />
        <exec command="php composer.phar --dev install" dir="." />
        <echo msg="Done running all the before scripts." />
    </target>

    <target name="linter" depends="beforescripts">
        <echo msg="Checking for syntax errors..." />
        <phplint haltonfailure="true" deprecatedAsError="true">
            <fileset dir=".">
                <patternset>
                    <include name="**/*.php"/>
                    <exclude name="vendor/**"/>
                </patternset>
            </fileset>
        </phplint>
        <echo msg="Done checking for syntax errors..." />
    </target>


</project>
